# Hyprland Configuration

$terminal = ghostty
$fileManager = dolphin
$menu = rofi -show drun -run-command 'uwsm app -- {cmd}'
$clipboard = rofi-cliphist-paste

env = XCURSOR_SIZE,24
env = HYPRCURSOR_SIZE,24
env = XDG_MENU_PREFIX,plasma-

# Monitor configuration - Dynamic laptop + external setup
# This works regardless of which laptop or external monitor port is used
monitor = ,preferred,auto,auto
monitor = eDP-1,1920x1080@60,0x0,auto
# External monitor will be auto-detected and positioned to the right
# Hyprland will automatically detect any external monitor connection

general {
    gaps_in = 5
    gaps_out = 10
    border_size = 2
    col.active_border = rgba(4a90e2ee) rgba(6bb6ffee) 45deg
    col.inactive_border = rgba(b0c4debb)
    resize_on_border = false
    allow_tearing = false
    layout = dwindle
}

decoration {
    rounding = 5
    active_opacity = 1.0
    inactive_opacity = 1

    blur {
        enabled = true
        size = 4
        passes = 2
        special = true
        vibrancy = 0.15
    }
}

animations {
    enabled = true
    # Using only stable, simple animations
    animation = windows, 1, 4, default
    animation = windowsOut, 1, 4, default, popin 90%
    animation = border, 1, 6, default
    animation = fade, 1, 4, default
    animation = workspaces, 1, 4, default
}

dwindle {
    pseudotile = true
    preserve_split = true
}

master {
    new_status = master
}

misc {
    force_default_wallpaper = -1
    disable_hyprland_logo = false
}

input {
    kb_layout = us,ir
    kb_options = grp:win_space_toggle
    follow_mouse = 0
    sensitivity = 0
    
    touchpad {
        natural_scroll = false
    }
}

gestures {
    workspace_swipe = true
}

device {
    name = epic-mouse-v1
    sensitivity = -0.5
}

# Mouse binds
bindm = SUPER, mouse:272, movewindow
bindm = SUPER, mouse:273, resizewindow

# Key binds
bind = SUPER, RETURN, exec, $terminal
bind = SUPER, w, killactive
bind = CTRL_SUPER, l, exec, hyprlock
bind = SUPER_SHIFT, Q, exit
bind = SUPER_SHIFT, f, togglefloating
bind = SUPER, f, fullscreen, 1
bind = CTRL, SPACE, exec, $menu
bind = SUPER, P, pseudo
bind = SUPER, r, togglesplit

# Focus movement
bind = SUPER, h, movefocus, l
bind = SUPER, l, movefocus, r
bind = SUPER, k, movefocus, u
bind = SUPER, j, movefocus, d

# Window swapping
bind = SUPER_SHIFT, h, swapwindow, l
bind = SUPER_SHIFT, l, swapwindow, r
bind = SUPER_SHIFT, k, swapwindow, u
bind = SUPER_SHIFT, j, swapwindow, d

# Workspace switching
bind = SUPER, 1, workspace, 1
bind = SUPER, 2, workspace, 2
bind = SUPER, 3, workspace, 3
bind = SUPER, 4, workspace, 4
bind = SUPER, 5, workspace, 5
bind = SUPER, 6, workspace, 6
bind = SUPER, 7, workspace, 7
bind = SUPER, 8, workspace, 8
bind = SUPER, 9, workspace, 9
bind = SUPER, 0, workspace, 10

# Move to workspace
bind = SUPER_SHIFT, 1, movetoworkspace, 1
bind = SUPER_SHIFT, 2, movetoworkspace, 2
bind = SUPER_SHIFT, 3, movetoworkspace, 3
bind = SUPER_SHIFT, 4, movetoworkspace, 4
bind = SUPER_SHIFT, 5, movetoworkspace, 5
bind = SUPER_SHIFT, 6, movetoworkspace, 6
bind = SUPER_SHIFT, 7, movetoworkspace, 7
bind = SUPER_SHIFT, 8, movetoworkspace, 8
bind = SUPER_SHIFT, 9, movetoworkspace, 9
bind = SUPER_SHIFT, 0, movetoworkspace, 10

# Special workspace
bind = SUPER, S, togglespecialworkspace, magic
bind = SUPER_SHIFT, S, movetoworkspace, special:magic

# Clipboard
bind = SUPER, v, exec, $clipboard
bind = SUPER_SHIFT, v, exec, rofi-cliphist-delete
bind = SUPER_CTRL, v, exec, cliphist-clear

# Mouse wheel workspace switching
bind = SUPER, mouse_down, workspace, e+1
bind = SUPER, mouse_up, workspace, e-1

# Dynamic workspace allocation for laptop + external monitor setup
# When external monitor is connected: External = main workspaces, Laptop = floating/aesthetic
# When no external: Laptop = main workspaces

# Main workspaces (1-10) - automatically go to primary (external when available)
# These will be on external monitor when connected, laptop when solo
bind = SUPER_CTRL, 1, workspace, 1
bind = SUPER_CTRL, 2, workspace, 2
bind = SUPER_CTRL, 3, workspace, 3
bind = SUPER_CTRL, 4, workspace, 4
bind = SUPER_CTRL, 5, workspace, 5
bind = SUPER_CTRL, 6, workspace, 6
bind = SUPER_CTRL, 7, workspace, 7
bind = SUPER_CTRL, 8, workspace, 8
bind = SUPER_CTRL, 9, workspace, 9
bind = SUPER_CTRL, 0, workspace, 10

# Laptop screen special workspaces (for floating/aesthetic apps when external connected)
bind = SUPER_CTRL, F1, workspace, 11  # Floating workspace for laptop screen
bind = SUPER_CTRL, F2, workspace, 12  # Aesthetic/widgets workspace
bind = SUPER_CTRL, F3, workspace, 13  # Monitoring/system info workspace

# Monitor focus switching (relative positioning - works with any monitor setup)
bind = SUPER, comma, focusmonitor, -1
bind = SUPER, period, focusmonitor, +1

# Workspace movement between monitors
bind = SUPER_SHIFT, comma, movecurrentworkspacetomonitor, -1
bind = SUPER_SHIFT, period, movecurrentworkspacetomonitor, +1

# Focus workspace on specific monitor (monitor-agnostic)
bind = SUPER_ALT, 1, focusworkspaceoncurrentmonitor, 1
bind = SUPER_ALT, 2, focusworkspaceoncurrentmonitor, 2
bind = SUPER_ALT, 3, focusworkspaceoncurrentmonitor, 3
bind = SUPER_ALT, 4, focusworkspaceoncurrentmonitor, 4
bind = SUPER_ALT, 5, focusworkspaceoncurrentmonitor, 5
bind = SUPER_ALT, 6, focusworkspaceoncurrentmonitor, 6
bind = SUPER_ALT, 7, focusworkspaceoncurrentmonitor, 7
bind = SUPER_ALT, 8, focusworkspaceoncurrentmonitor, 8
bind = SUPER_ALT, 9, focusworkspaceoncurrentmonitor, 9
bind = SUPER_ALT, 0, focusworkspaceoncurrentmonitor, 10

# Resize mode - SUPER + R then hjkl for intuitive resizing
bind = SUPER, R, submap, resize
submap = resize
binde = , h, resizeactive, -30 0
binde = , l, resizeactive, 30 0
binde = , k, resizeactive, 0 -30
binde = , j, resizeactive, 0 30
binde = SHIFT, h, resizeactive, -10 0
binde = SHIFT, l, resizeactive, 10 0
binde = SHIFT, k, resizeactive, 0 -10
binde = SHIFT, j, resizeactive, 0 10
bind = , escape, submap, reset
bind = , RETURN, submap, reset
submap = reset

# Alternative resize binds (without submap)
binde = SUPER_CTRL, h, resizeactive, -20 0
binde = SUPER_CTRL, l, resizeactive, 20 0
binde = SUPER_CTRL, k, resizeactive, 0 -20
binde = SUPER_CTRL, j, resizeactive, 0 20

# Move binds (repeatable)
binde = SUPER_ALT, h, moveactive, -20 0
binde = SUPER_ALT, l, moveactive, 20 0
binde = SUPER_ALT, k, moveactive, 0 -20
binde = SUPER_ALT, j, moveactive, 0 20

# Media and function keys
bindel = , XF86AudioRaiseVolume, exec, volume up
bindel = , XF86AudioLowerVolume, exec, volume down
bindel = , XF86AudioMute, exec, volume mute
bindel = , XF86AudioMicMute, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
bindel = , XF86MonBrightnessUp, exec, brightness up
bindel = , XF86MonBrightnessDown, exec, brightness down
bindel = , XF86LaunchA, exec, backlight down
bindel = SUPER, XF86LaunchA, exec, backlight up

# Screenshots
bindel = , Print, exec, grim -g "$(slurp)" - | wl-copy
bindel = , XF86Print, exec, grim -g "$(slurp)" - | wl-copy
bindel = SHIFT, Print, exec, grim - | wl-copy
bindel = SHIFT, XF86Print, exec, grim - | wl-copy
bindel = SHIFT_ALT, F3, exec, grim - | wl-copy
bindel = SHIFT_ALT, F4, exec, grim -g "$(slurp)" - | wl-copy

xwayland {
    force_zero_scaling = true
}

# Window rules
windowrulev2 = suppressevent maximize, class:.*
windowrulev2 = opacity 1.0 override 1.0 override, class:^(vlc|firefox|chromium-browser|jetbrains-.*)$
windowrulev2 = bordercolor rgba(87ceebee) rgba(87ceebee), class:^(jetbrains-.*)$
windowrulev2 = animation none, class:^(jetbrains-.*)$
windowrulev2 = nofocus, class:^jetbrains-(?!toolbox), floating:1, title:^win\d+$
windowrulev2 = float, class:^(jetbrains-.*)$, title:^(win[0-9]+)$
windowrulev2 = nofocus, class:^(jetbrains-.*)$, title:^(win[0-9]+)$

# Dynamic window rules for laptop + external monitor setup
# When external monitor is connected: External gets main apps, Laptop gets floating/aesthetic

# Main applications - go to external monitor (workspaces 1-10)
# These will automatically use external monitor when available, laptop when solo
windowrulev2 = workspace 1, class:^(firefox|chromium|brave)$
windowrulev2 = workspace 2, class:^(code|jetbrains-.*|cursor)$
windowrulev2 = workspace 3, class:^(discord|slack|telegram|signal)$
windowrulev2 = workspace 4, class:^(thunar|dolphin|nautilus|pcmanfm)$
windowrulev2 = workspace 5, class:^(spotify|vlc|mpv|rhythmbox)$
windowrulev2 = workspace 6, class:^(ghostty|kitty|alacritty|wezterm|foot)$
windowrulev2 = workspace 7, class:^(btop|htop|nvtop|iotop)$
windowrulev2 = workspace 8, title:^(.*nvim.*|.*vim.*|.*terminal.*|.*Terminal.*)$
windowrulev2 = workspace 9, class:^(gimp|inkscape|blender|kdenlive)$
windowrulev2 = workspace 10, class:^(steam|lutris|gamemode)$

# Laptop screen floating/aesthetic apps (workspaces 11-13)
# These apps will appear on laptop screen when external monitor is connected
windowrulev2 = workspace 11, class:^(conky|polybar|waybar|eww)$
windowrulev2 = workspace 11, class:^(calculator|gnome-calculator|qalculate)$
windowrulev2 = workspace 11, class:^(clock|tty-clock|peaclock)$

# Aesthetic/widget workspace (workspace 12)
windowrulev2 = workspace 12, class:^(cava|visualizer)$
windowrulev2 = workspace 12, class:^(cmatrix|pipes|asciiquarium)$
windowrulev2 = workspace 12, title:^(.*rice.*|.*aesthetic.*|.*widget.*)$

# Monitoring/system info workspace (workspace 13)
windowrulev2 = workspace 13, class:^(system-monitor|gnome-system-monitor)$
windowrulev2 = workspace 13, class:^(mission-control|activity-monitor)$
windowrulev2 = workspace 13, title:^(.*system.*|.*monitor.*|.*performance.*)$

# Floating rules for laptop screen apps when external monitor connected
windowrulev2 = float, workspace:11
windowrulev2 = float, workspace:12
windowrulev2 = float, workspace:13

# Size and positioning rules for laptop screen floating apps
windowrulev2 = size 400 300, workspace:11
windowrulev2 = size 500 400, workspace:12
windowrulev2 = size 600 500, workspace:13

# Make laptop screen apps semi-transparent for aesthetic effect
windowrulev2 = opacity 0.9, workspace:11
windowrulev2 = opacity 0.85, workspace:12
windowrulev2 = opacity 0.9, workspace:13

# General floating window rules for popups and dialogs
windowrulev2 = float, class:^(.*)[Dd]ialog$
windowrulev2 = float, class:^(.*)[Pp]opup$
windowrulev2 = float, title:^(.*)[Pp]references$
windowrulev2 = float, title:^(.*)[Ss]ettings$
windowrulev2 = float, class:^(pavucontrol|pulsemixer)$
windowrulev2 = float, class:^(nm-connection-editor|network-manager)$

# XWayland video bridge
windowrule = opacity 0.0 override, class:^(xwaylandvideobridge)$
windowrule = noanim, class:^(xwaylandvideobridge)$
windowrule = noinitialfocus, class:^(xwaylandvideobridge)$
windowrule = maxsize 1 1, class:^(xwaylandvideobridge)$
windowrule = noblur, class:^(xwaylandvideobridge)$
windowrule = nofocus, class:^(xwaylandvideobridge)$

